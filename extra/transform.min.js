"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}!function(){var t="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js",e="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js";(new(function(){function n(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=s.lib,r=s.api;_classCallCheck(this,n),this.replaceCharts=!0,this.endPoint=r||"https://transform-me.herokuapp.com/api/hc-fc/",this.libPath=i||t,this.fcTheme=e,this.libStacks={}}return _createClass(n,[{key:"attachLib",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.src,s=e.position,i=void 0===s?"body":s;return new Promise(function(e){if(!t.libStacks.src){var s=document.createElement("script");s.src=n,s.type="text/javascript",document[i].appendChild(s),t.libStacks[n]=!0,s.onload=function(){return e()}}})}},{key:"renderCharts",value:async function(t,e){var n,s,i;(n=this.endPoint,s={chartConfig:t},i=new XMLHttpRequest,new Promise(function(t,e){i.open("POST",n,!0),i.setRequestHeader("Content-type","application/json"),i.addEventListener("load",function(){if(4===this.readyState&&200===this.status){var n=JSON.parse(this.responseText);t(n)}else e(new Error(""))}),i.send(JSON.stringify(s))})).then(function(t){FusionCharts.ready(function(){new FusionCharts({...t}).render(e)})}).catch(function(t){return console.error(t)})}},{key:"parseCharts",value:function(){var t=this,e=Highcharts.charts;e&&e.forEach(function(e){var n=JSON.stringify(e.userOptions),s=e.renderTo.id;e.destroy(),setTimeout(function(){return t.renderCharts(n,document.getElementById(s))},1e3)})}},{key:"init",value:async function(){Highcharts&&"undefined"!=typeof Highcharts&&(await this.attachLib({src:this.libPath}),await this.attachLib({src:this.fcTheme}),this.parseCharts())}}]),n}())).init()}();
